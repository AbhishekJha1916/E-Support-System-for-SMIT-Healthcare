<link rel="stylesheet" href="/css/doctor-patient-profile.css">
<div class="main-div">
    <div class="patient-list-div">
        <div class="pl-heading">PATIENTS</div>
        <section id="doc-list">
            <% for(let patient of patient_list){ %>
                <div class="seperation-doc"></div>
                <a href="/chat/chat-with-patient-id/<%= patient._id %>">
                    <div class="doc-id">
                        <img src="/images/patient-n.png" alt="Doctor " class="image">
                        <div class="doc-info">
                            <h1 class="doc-name">
                                <%= patient.username %>
                            </h1>
                            <h3 class="doc-type"></h3>
                        </div>
                    </div>
                </a>
                <% } %>
        </section>
    </div>
    <div class="patient-detail-div">
        <div class="patient-detail-div-content">
            <div class="profile-heading">
                <img src="/images/patient-n.png" alt="Doctor " class="profile-heading-image">
            </div>
            <div class="button-profile-set">
                <button class="button-profile" id="b1" onclick="changetab(this.value, this.id)"
                    value="patient-content">Text Chat</button>
                <div class="vertical-division"></div>
                <button class="button-profile" id="b2" onclick="changetab(this.value, this.id)"
                    value="patient-visits">Video Chat</button>
                <div class="vertical-division"></div>
                <button class="button-profile" id="b3" onclick="changetab(this.value, this.id)"
                    value="patient-labs">Labs</button>
                <div class="vertical-division"></div>
                <button class="button-profile" id="b4" onclick="changetab(this.value, this.id)"
                    value="patient-prescriptions">Prescriptions</button>
            </div>
            <div id="patient-content">
                <link rel="stylesheet" href="/css/chat_box.css">

                <% if(locals.user){ %>
                    <div id="user-chat-box">
                        <ul id="chat-messages-list">
                            <li class="other-message">
                                <span>
                                    Other Message
                                </span>
                            </li>
                            <li class="self-message">
                                <span>
                                    Self Message
                                </span>
                            </li>
                        </ul>
                        <div id="chat-message-input-container">
                            <input id="chat-message-input" placeholder="Type message here">
                            <button id="send-message">Send</button>
                        </div>
                    </div>
                    <% } %>
            </div>
            <div id="patient-visits">
                VIdeo chat
            </div>
            <div id="patient-labs">Labs: Coming soon!</div>

            <!-- prescription section -->
            <div id="patient-prescriptions">
                Prescriptions
            </div>
        </div>
    </div>
</div>

<script src="/javascript/doctor-patient-profile.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.js" integrity="sha512-xbQU0+iHqhVt7VIXi6vBJKPh3IQBF5B84sSHdjKiSccyX/1ZI7Vnkt2/8y8uruj63/DVmCxfUNohPNruthTEQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/javascript/chat_engine.js"></script>
<% if(locals.user){ %>
<script>
  new ChatEngine("user-chat-box","<%= locals.user.email %>");
</script>
<% } %>
<script>
    window.locals = <%- JSON.stringify(locals) %>;
</script>